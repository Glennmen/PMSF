"use strict";function isFunction(n){return n&&"[object Function]"==={}.toString.call(n)}function runFunctionString(n){if(n.trim().length>0){var i=new Function(n);isFunction(i)&&i()}}function findValidClient(n,i){for(var t=null,o=0;o<n.length;o++){var e=n[o];if(e.url===i&&(t=e,"focused"in e&&e.focused))return e}return t}function sendCenterMapMessage(n,i,t){n.postMessage(JSON.stringify({action:"centerMap",lat:i,lon:t}))}self.addEventListener("message",function(n){self.client=n.source}),self.onnotificationclick=function(n){n.notification.close(),n.waitUntil(clients.matchAll({includeUncontrolled:!0,type:"window"}).then(function(i){var t=findValidClient(i,n.notification.data.origin);t&&"focus"in t?t.focus().then(function(i){sendCenterMapMessage(i,n.notification.data.lat,n.notification.data.lon)}):"openWindow"in clients&&clients.openWindow("/").then(function(i){sendCenterMapMessage(i,n.notification.data.lat,n.notification.data.lon)})}))},self.onnotificationclose=function(n){runFunctionString(n.notification.data.onClose),self.client.postMessage(JSON.stringify({id:n.notification.data.id,action:"close"}))};
