{"version":3,"sources":["../../js/stats.js"],"names":["countMarkers","map","document","getElementById","innerHTML","i","arenaCount","arenaTotal","pkmnCount","pkmnTotal","pokestopCount","pokestopTotal","pokeStatTable","$","DataTable","currentVisibleMap","getBounds","thisPokeIsVisible","thisGymIsVisible","thisPokestopIsVisible","Store","get","each","mapData","pokemons","key","value","thisPokeLocation","lat","lng","contains","Count","pokeCounts","length","push","ID","Name","Math","round","dataTable","show","clear","rows","add","draw","hide","gyms","thisGymLocation","arenaListString","pokestops","thisPokestopLocation","pokestopListString"],"mappings":"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","file":"stats.built.js","sourcesContent":["function countMarkers(map) { // eslint-disable-line no-unused-vars\r\n    document.getElementById('stats-ldg-label').innerHTML = ''\r\n    document.getElementById('stats-pkmn-label').innerHTML = 'Pokémon'\r\n    document.getElementById('stats-gym-label').innerHTML = 'Gyms'\r\n    document.getElementById('stats-pkstop-label').innerHTML = 'PokéStops'\r\n\r\n    var i = 0\r\n    var arenaCount = []\r\n    var arenaTotal = 0\r\n    var pkmnCount = []\r\n    var pkmnTotal = 0\r\n    var pokestopCount = []\r\n    var pokestopTotal = 0\r\n    var pokeStatTable = $('#pokemonList_table').DataTable()\r\n\r\n    // Bounds of the currently visible map\r\n    var currentVisibleMap = map.getBounds()\r\n\r\n    // Is a particular Pokémon/Gym/Pokéstop within the currently visible map?\r\n    var thisPokeIsVisible = false\r\n    var thisGymIsVisible = false\r\n    var thisPokestopIsVisible = false\r\n\r\n    if (Store.get('showPokemon')) {\r\n        $.each(mapData.pokemons, function (key, value) {\r\n            var thisPokeLocation = { lat: mapData.pokemons[key]['latitude'], lng: mapData.pokemons[key]['longitude'] }\r\n            thisPokeIsVisible = currentVisibleMap.contains(thisPokeLocation)\r\n\r\n            if (thisPokeIsVisible) {\r\n                pkmnTotal++\r\n                if (pkmnCount[mapData.pokemons[key]['pokemon_id']] === 0 || !pkmnCount[mapData.pokemons[key]['pokemon_id']]) {\r\n                    pkmnCount[mapData.pokemons[key]['pokemon_id']] = {\r\n                        'ID': mapData.pokemons[key]['pokemon_id'],\r\n                        'Count': 1,\r\n                        'Name': mapData.pokemons[key]['pokemon_name']\r\n                    }\r\n                } else {\r\n                    pkmnCount[mapData.pokemons[key]['pokemon_id']].Count += 1\r\n                }\r\n            }\r\n        })\r\n\r\n        var pokeCounts = []\r\n\r\n        for (i = 0; i < pkmnCount.length; i++) {\r\n            if (pkmnCount[i] && pkmnCount[i].Count > 0) {\r\n                pokeCounts.push(\r\n                    [\r\n                        '<img src=\\'static/icons/' + pkmnCount[i].ID + '.png\\' />',\r\n                        '<a href=\\'https://pokemon.gameinfo.io/en/pokemon/' + pkmnCount[i].ID + '\\' target=\\'_blank\\' title=\\'View in Pokédex\\' style=\\'color: black;\\'>' + pkmnCount[i].Name + '</a>',\r\n                        pkmnCount[i].Count,\r\n                        (Math.round(pkmnCount[i].Count * 100 / pkmnTotal * 10) / 10) + '%'\r\n                    ]\r\n                )\r\n            }\r\n        }\r\n\r\n        // Clear stale data, add fresh data, redraw\r\n\r\n        $('#pokemonList_table').dataTable().show()\r\n        pokeStatTable\r\n            .clear()\r\n            .rows.add(pokeCounts)\r\n            .draw()\r\n    } else {\r\n        pokeStatTable\r\n            .clear()\r\n            .draw()\r\n\r\n        document.getElementById('pokeStatStatus').innerHTML = 'Pokémon markers are disabled'\r\n        $('#pokemonList_table').dataTable().hide()\r\n    }       // end Pokémon processing\r\n\r\n    // begin Gyms processing\r\n    if (Store.get('showGyms')) {\r\n        $.each(mapData.gyms, function (key, value) {\r\n            var thisGymLocation = { lat: mapData.gyms[key]['latitude'], lng: mapData.gyms[key]['longitude'] }\r\n            thisGymIsVisible = currentVisibleMap.contains(thisGymLocation)\r\n\r\n            if (thisGymIsVisible) {\r\n                arenaTotal++\r\n                if (arenaCount[mapData.gyms[key]['team_id']] === 0 || !arenaCount[mapData.gyms[key]['team_id']]) {\r\n                    arenaCount[mapData.gyms[key]['team_id']] = 1\r\n                } else {\r\n                    arenaCount[mapData.gyms[key]['team_id']] += 1\r\n                }\r\n            }\r\n        })\r\n\r\n        var arenaListString = '<table><th>Icon</th><th>Team Color</th><th>Count</th><th>%</th><tr><td></td><td>Total</td><td>' + arenaTotal + '</td></tr>'\r\n        for (i = 0; i < arenaCount.length; i++) {\r\n            if (arenaCount[i] > 0) {\r\n                if (i === 1) {\r\n                    arenaListString += '<tr><td><img src=\"static/forts/Mystic.png\" /></td><td>' + 'Blue' + '</td><td>' + arenaCount[i] + '</td><td>' + Math.round(arenaCount[i] * 100 / arenaTotal * 10) / 10 + '%</td></tr>'\r\n                } else if (i === 2) {\r\n                    arenaListString += '<tr><td><img src=\"static/forts/Valor.png\" /></td><td>' + 'Red' + '</td><td>' + arenaCount[i] + '</td><td>' + Math.round(arenaCount[i] * 100 / arenaTotal * 10) / 10 + '%</td></tr>'\r\n                } else if (i === 3) {\r\n                    arenaListString += '<tr><td><img src=\"static/forts/Instinct.png\" /></td><td>' + 'Yellow' + '</td><td>' + arenaCount[i] + '</td><td>' + Math.round(arenaCount[i] * 100 / arenaTotal * 10) / 10 + '%</td></tr>'\r\n                } else {\r\n                    arenaListString += '<tr><td><img src=\"static/forts/Uncontested.png\" /></td><td>' + 'Clear' + '</td><td>' + arenaCount[i] + '</td><td>' + Math.round(arenaCount[i] * 100 / arenaTotal * 10) / 10 + '%</td></tr>'\r\n                }\r\n            }\r\n        }\r\n        arenaListString += '</table>'\r\n        document.getElementById('arenaList').innerHTML = arenaListString\r\n    } else {\r\n        document.getElementById('arenaList').innerHTML = 'Gyms markers are disabled'\r\n    }\r\n\r\n    if (Store.get('showPokestops')) {\r\n        $.each(mapData.pokestops, function (key, value) {\r\n            var thisPokestopLocation = { lat: mapData.pokestops[key]['latitude'], lng: mapData.pokestops[key]['longitude'] }\r\n            thisPokestopIsVisible = currentVisibleMap.contains(thisPokestopLocation)\r\n\r\n            if (thisPokestopIsVisible) {\r\n                if (mapData.pokestops[key]['lure_expiration'] && mapData.pokestops[key]['lure_expiration'] > 0) {\r\n                    if (pokestopCount[1] === 0 || !pokestopCount[1]) {\r\n                        pokestopCount[1] = 1\r\n                    } else {\r\n                        pokestopCount[1] += 1\r\n                    }\r\n                } else {\r\n                    if (pokestopCount[0] === 0 || !pokestopCount[0]) {\r\n                        pokestopCount[0] = 1\r\n                    } else {\r\n                        pokestopCount[0] += 1\r\n                    }\r\n                }\r\n                pokestopTotal++\r\n            }\r\n        })\r\n        var pokestopListString = '<table><th>Icon</th><th>Status</th><th>Count</th><th>%</th><tr><td></td><td>Total</td><td>' + pokestopTotal + '</td></tr>'\r\n        for (i = 0; i < pokestopCount.length; i++) {\r\n            if (pokestopCount[i] > 0) {\r\n                if (i === 0) {\r\n                    pokestopListString += '<tr><td><img src=\"static/forts/Pstop.png\" /></td><td>' + 'Not Lured' + '</td><td>' + pokestopCount[i] + '</td><td>' + Math.round(pokestopCount[i] * 100 / pokestopTotal * 10) / 10 + '%</td></tr>'\r\n                } else if (i === 1) {\r\n                    pokestopListString += '<tr><td><img src=\"static/forts/PstopLured.png\" /></td><td>' + 'Lured' + '</td><td>' + pokestopCount[i] + '</td><td>' + Math.round(pokestopCount[i] * 100 / pokestopTotal * 10) / 10 + '%</td></tr>'\r\n                }\r\n            }\r\n        }\r\n        pokestopListString += '</table>'\r\n        document.getElementById('pokestopList').innerHTML = pokestopListString\r\n    } else {\r\n        document.getElementById('pokestopList').innerHTML = 'PokéStops markers are disabled'\r\n    }\r\n}\r\n"]}